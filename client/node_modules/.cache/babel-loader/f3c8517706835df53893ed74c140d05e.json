{"ast":null,"code":"// ACA DEFINO PARA PODER SUBIR IMAGENES\nconst multer = require('multer'); // const ejs = require('ejs')\n// ** este multer filtra las imagenes y muestra la info del archivo y ubic\n// en storage se coloca donde van a ser guardado los archivos\n\n\nvar storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, './src/uploads');\n  },\n  filename: (req, file, cb) => {\n    cb(null, Date.now() + file.originalname);\n  }\n});\n\nconst fileFilter = (res, file, cb) => {\n  if (file.mimetype === \"image/jpeg\" || file.mimetype === \"image/jpg\" || file.mimetype === \"image/png\") {\n    cb(null, true);\n  } else {\n    cb(null, false);\n  }\n};\n\nvar upload = multer({\n  storage: storage,\n  fileFilter: fileFilter\n});\nrouter.post(\"/upload\", upload.single('file'), async (req, res, cb) => {\n  if (req.file) {\n    const fotoint = req.file.path;\n    res.send(fotoint);\n  }\n}); // ** para poner en las rutas de Post\n// Router.post(\"/upload\", upload.single('myImg'),async(req,res,next)=>{\n//     if(req,file){\n//         const pathName=req.file.path;\n//         res.send(req.file,pathName)\n//     }\n// })","map":{"version":3,"sources":["D:/Marcos Muni/Proyecto Muni/Gitinspecobras/inspecobras/client/src/components/Upload.jsx"],"names":["multer","require","storage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","fileFilter","res","mimetype","upload","router","post","single","fotoint","path","send"],"mappings":"AAAA;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB,C,CACA;AAEA;AAEA;;;AACA,IAAIC,OAAO,GAAGF,MAAM,CAACG,WAAP,CAAmB;AAC7BC,EAAAA,WAAW,EAAE,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAClCA,IAAAA,EAAE,CAAC,IAAD,EAAO,eAAP,CAAF;AACH,GAH4B;AAI7BC,EAAAA,QAAQ,EAAE,CAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AACzBA,IAAAA,EAAE,CAAC,IAAD,EAAOE,IAAI,CAACC,GAAL,KAAWJ,IAAI,CAACK,YAAvB,CAAF;AACH;AAN4B,CAAnB,CAAd;;AASA,MAAMC,UAAU,GAAG,CAACC,GAAD,EAAMP,IAAN,EAAYC,EAAZ,KAAkB;AACjC,MAAID,IAAI,CAACQ,QAAL,KAAkB,YAAlB,IAAkCR,IAAI,CAACQ,QAAL,KAAkB,WAApD,IAAmER,IAAI,CAACQ,QAAL,KAAkB,WAAzF,EAAqG;AACjGP,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH,GAFD,MAEK;AACDA,IAAAA,EAAE,CAAC,IAAD,EAAO,KAAP,CAAF;AACH;AACJ,CAND;;AAQA,IAAIQ,MAAM,GAAGf,MAAM,CAAC;AAChBE,EAAAA,OAAO,EAACA,OADQ;AAEhBU,EAAAA,UAAU,EAACA;AAFK,CAAD,CAAnB;AAKAI,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAuBF,MAAM,CAACG,MAAP,CAAc,MAAd,CAAvB,EAA8C,OAAMb,GAAN,EAAWQ,GAAX,EAAgBN,EAAhB,KAAqB;AAC/D,MAAIF,GAAG,CAACC,IAAR,EAAc;AACV,UAAMa,OAAO,GAACd,GAAG,CAACC,IAAJ,CAASc,IAAvB;AACAP,IAAAA,GAAG,CAACQ,IAAJ,CAASF,OAAT;AACH;AACJ,CALD,E,CAOA;AAEA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["// ACA DEFINO PARA PODER SUBIR IMAGENES\r\nconst multer = require('multer');\r\n// const ejs = require('ejs')\r\n\r\n// ** este multer filtra las imagenes y muestra la info del archivo y ubic\r\n\r\n// en storage se coloca donde van a ser guardado los archivos\r\nvar storage = multer.diskStorage({\r\n    destination: function (req, file, cb) {\r\n        cb(null, './src/uploads')\r\n    },    \r\n    filename: (req, file, cb) => {\r\n        cb(null, Date.now()+file.originalname)\r\n    }\r\n});\r\n\r\nconst fileFilter = (res, file, cb) =>{\r\n    if (file.mimetype === \"image/jpeg\" || file.mimetype === \"image/jpg\" || file.mimetype === \"image/png\"){\r\n        cb(null, true)\r\n    }else{       \r\n        cb(null, false)\r\n    }\r\n}\r\n\r\nvar upload = multer({\r\n    storage:storage,\r\n    fileFilter:fileFilter\r\n})\r\n\r\nrouter.post(\"/upload\", upload.single('file'), async(req, res, cb)=>{\r\n    if (req.file) {\r\n        const fotoint=req.file.path;\r\n        res.send(fotoint)\r\n    }\r\n})\r\n\r\n// ** para poner en las rutas de Post\r\n\r\n// Router.post(\"/upload\", upload.single('myImg'),async(req,res,next)=>{\r\n//     if(req,file){\r\n//         const pathName=req.file.path;\r\n//         res.send(req.file,pathName)\r\n//     }\r\n// })"]},"metadata":{},"sourceType":"module"}